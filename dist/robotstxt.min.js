/*! @playfulsparkle/robotstxt-js v1.0.6 | Copyright (c) 2025-present, Zsolt Oroszl√°ny <hello@playfulsparkle.com> | BSD-3-Clause */
(()=>{class r{constructor(e,t){this.type=e,this.path=t,this.regex=this.createRegex(t)}match(e){return this.regex.test(e)}createRegex(e){e=e.replace(/[.^+?(){}[\]|\\]/gu,"\\$&").replace(/\*/gu,".*?");return new RegExp("^"+e,"u")}}class p{constructor(e){this.userAgent=e,this.crawlDelay=void 0,this.rules=[]}getName(){return this.userAgent}getCrawlDelay(){return this.crawlDelay}getRules(){return this.rules}allow(e){if(void 0===e)throw new Error("The 'path' parameter is required.");this.addRule("allow",e)}disallow(e){if(void 0===e)throw new Error("The 'path' parameter is required.");this.addRule("disallow",e)}addRule(e,t){this.rules.push(new r(e,t))}}class t{constructor(e){this.groups=[],this.sitemaps=[],this.parse(e)}parse(e){if(void 0===e)throw new Error("The 'content' parameter is required.");var t,r=[];for(t of e.split(/\r\n|\r|\n/)){var i=t.trim();if(i&&!i.startsWith("#")){var s=i.indexOf(":");if(-1!==s){var a=i.slice(0,s).trim().toLowerCase();let e=i.slice(s+1).trim();i=e.search(/(?:\s|^)#/);-1!==i&&(e=e.slice(0,i).trim()),a&&e&&r.push({directive:a,value:e})}}}let l=[],o=!1,u=!1,h={};for(let e=0;e<r.length;e++){var n=r[e],c=["allow","disallow","crawl-delay"].includes(n.directive)&&!u;if("user-agent"!==n.directive&&!c||(u=!0,c=c?"*":n.value,l.includes(c)||l.push(c),h[c])||(h[c]=new p(c)),"allow"===n.directive){let t=this.normalizePath(n.value);l.forEach(e=>h[e].allow(t)),o=!0}else if("disallow"===n.directive){let t=this.normalizePath(n.value);l.forEach(e=>h[e].disallow(t)),o=!0}else if("crawl-delay"===n.directive){let t=+n.value;if(isNaN(t))continue;if(t<=0)throw new Error(`Crawl-Delay must be a positive number. The provided value is ${t}.`);l.forEach(e=>{h[e].crawlDelay||(h[e].crawlDelay=t)}),o=!0}else"sitemap"===n.directive&&this.sitemaps.push(n.value);c=r[e+1];c&&o&&"user-agent"===c.directive&&(o=!1,l=[])}this.groups=Object.keys(h).map(e=>h[e])}isAllowed(e,t){if(void 0===e)throw new Error("The 'url' parameter is required.");if(void 0===t)throw new Error("The 'userAgent' parameter is required.");var r,i,t=this.getApplicableRules(t),s=this.normalizeUrlPath(e),a=[];for(r of t)r.match(s)&&a.push(r);if(0===a.length)return!0;let l=a[0];for(i of a){var o=this.getRuleSpecificity(i.path);this.getRuleSpecificity(l.path)<o&&(l=i)}return"allow"===l.type}isDisallowed(e,t){return!this.isAllowed(e,t)}getSitemaps(){return this.sitemaps}getGroup(t){if(t)for(let e=0;e<this.groups.length;e++){var r=this.groups[e];if(r.userAgent.toLowerCase()===t.toLowerCase())return r}}getRuleSpecificity(e){let t=e.length;return-1!==e.indexOf("*")?t-=.5:"$"===e.slice(-1)&&(t+=.5),t}getApplicableGroups(t){var e=this.groups.filter(e=>e.getName().toLowerCase()===t.toLowerCase());return 0<e.length?e:this.groups.filter(e=>"*"===e.getName())}getApplicableRules(e){return this.getApplicableGroups(e).reduce((e,t)=>e.concat(t.getRules()),[])}normalizeUrlPath(t){try{return this.normalizePath(new URL(t).pathname)}catch(e){return this.normalizePath(t)}}normalizePath(t){let r;try{r=decodeURIComponent(t)}catch(e){r=t}t=r.replace(/\/+/gu,"/");return"/"===t[0]?t:"/"+t}}function e(e){return new t(e)}"undefined"!=typeof exports&&(exports.robotstxt=e),"undefined"!=typeof window&&(window.robotstxt=e,"function"==typeof define)&&define.amd&&define(()=>({robotstxt:e}))})();
//# sourceMappingURL=robotstxt.min.js.map
