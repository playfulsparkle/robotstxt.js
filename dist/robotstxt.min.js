/*! @playfulsparkle/robotstxt-js v1.0.4 | Copyright (c) 2025-present, Zsolt Oroszl√°ny <hello@playfulsparkle.com> | BSD-3-Clause */
(()=>{class r{constructor(e,t){this.type=e,this.path=t,this.regex=this.createRegex(t)}match(e){return this.regex.test(e)}createRegex(e){e=e.replace(/[.^+?(){}[\]|\\]/gu,"\\$&").replace(/\*/gu,".*?");return new RegExp("^"+e,"u")}}class p{constructor(e){this.userAgent=e,this.crawlDelay=void 0,this.rules=[]}getName(){return this.userAgent}getCrawlDelay(){return this.crawlDelay}getRules(){return this.rules}allow(e){if(void 0===e)throw new Error("The 'path' parameter is required.");this.addRule("allow",e)}disallow(e){if(void 0===e)throw new Error("The 'path' parameter is required.");this.addRule("disallow",e)}addRule(e,t){this.rules.push(new r(e,t))}}class t{constructor(e){this.parsedData={groups:[],sitemaps:[]},this.parse(e)}parse(e){if(void 0===e)throw new Error("The 'content' parameter is required.");var t,r=[];for(t of e.split(/\r\n|\r|\n/)){var a=t.trim();if(a&&!a.startsWith("#")){var i=a.indexOf(":");if(-1!==i){var s=a.slice(0,i).trim().toLowerCase();let e=a.slice(i+1).trim();a=e.search(/(?:\s|^)#/);-1!==a&&(e=e.slice(0,a).trim()),s&&e&&r.push({directive:s,value:e})}}}r[0]&&"user-agent"!==r[0].directive&&r.unshift({directive:"user-agent",value:"*"});let l=[],o=!1,u={};for(let e=0;e<r.length;e++){var h=r[e],n=r[e+1];if("user-agent"===h.directive)l.push(h.value),u[h.value]||(u[h.value]=new p(h.value));else if("allow"===h.directive){let t=this.normalizePath(h.value);l.forEach(e=>u[e].allow(t)),o=!0}else if("disallow"===h.directive){let t=this.normalizePath(h.value);l.forEach(e=>u[e].disallow(t)),o=!0}else if("crawl-delay"===h.directive){let t=+h.value;if(isNaN(t))continue;if(t<=0)throw new Error(`Crawl-Delay must be a positive number. The provided value is ${t}.`);l.forEach(e=>{u[e].crawlDelay||(u[e].crawlDelay=t)}),o=!0}else"sitemap"===h.directive&&this.parsedData.sitemaps.push(h.value);n&&o&&"user-agent"===n.directive&&(o=!1,l=[])}this.parsedData.groups=Object.keys(u).map(e=>u[e])}isAllowed(e,t){if(void 0===e)throw new Error("The 'url' parameter is required.");if(void 0===t)throw new Error("The 'userAgent' parameter is required.");var r,a,t=this.getApplicableRules(t),i=this.normalizeUrlPath(e),s=[];for(r of t)r.match(i)&&s.push(r);if(0===s.length)return!0;let l=s[0];for(a of s){var o=this.getRuleSpecificity(a.path);this.getRuleSpecificity(l.path)<o&&(l=a)}return"allow"===l.type}isDisallowed(e,t){return!this.isAllowed(e,t)}getSitemaps(){return this.parsedData.sitemaps}getGroup(t){if(t)for(let e=0;e<this.parsedData.groups.length;e++){var r=this.parsedData.groups[e];if(r.userAgent.toLowerCase()===t.toLowerCase())return r}}getRuleSpecificity(e){let t=e.length;return-1!==e.indexOf("*")?t-=.5:"$"===e.slice(-1)&&(t+=.5),t}getApplicableGroups(t){var e=this.parsedData.groups.filter(e=>e.getName().toLowerCase()===t.toLowerCase());return 0<e.length?e:this.parsedData.groups.filter(e=>"*"===e.getName())}getApplicableRules(e){return this.getApplicableGroups(e).reduce((e,t)=>e.concat(t.getRules()),[])}normalizeUrlPath(t){try{return this.normalizePath(new URL(t).pathname)}catch(e){return this.normalizePath(t)}}normalizePath(t){let r;try{r=decodeURIComponent(t)}catch(e){r=t}t=r.replace(/\/+/gu,"/");return"/"===t[0]?t:"/"+t}}function e(e){return new t(e)}"undefined"!=typeof exports&&(exports.robotstxt=e),"undefined"!=typeof window&&(window.robotstxt=e,"function"==typeof define)&&define.amd&&define(()=>({robotstxt:e}))})();
//# sourceMappingURL=robotstxt.min.js.map
