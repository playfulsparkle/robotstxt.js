/*! @playfulsparkle/robotstxt-js v1.0.7 | Copyright (c) 2025-present, Zsolt Oroszl√°ny <hello@playfulsparkle.com> | BSD-3-Clause */
(()=>{class r{constructor(e,t){this.type=e,this.path=t,this.regex=this.createRegex(t)}match(e){return this.regex.test(e)}createRegex(e){e=e.replace(/[.^+?(){}[\]|\\]/gu,"\\$&").replace(/\*/gu,".*?");return new RegExp("^"+e,"u")}}class d{constructor(e){this.userAgent=e,this.crawlDelay=void 0,this.cacheDelay=void 0,this.rules=[],this.comment=[],this.robotVersion=void 0,this.visitTime=void 0,this.requestRates=[]}getName(){return this.userAgent}getComment(){return this.comment}getRobotVersion(){return this.robotVersion}getVisitTime(){return this.visitTime}getRequestRates(){return this.requestRates}getCacheDelay(){return this.cacheDelay}getCrawlDelay(){return this.crawlDelay}getRules(){return this.rules}addRule(e,t){if(void 0===e)throw new Error("The 'type' parameter is required.");if(void 0===t)throw new Error("The 'path' parameter is required.");this.rules.push(new r(e,t))}}class t{constructor(e){this.groups=[],this.sitemaps=[],this.cleanParam=[],this.host=void 0,this.parse(e)}parse(e){if(void 0===e)throw new Error("The 'content' parameter is required.");var t,i=[];for(t of e.split(/\r\n|\r|\n/)){var r=t.trim();if(r&&"#"!==r[0]){var a=r.indexOf(":");if(-1!==a){var s=r.slice(0,a).trim().toLowerCase();let e=r.slice(a+1).trim();r=e.search(/(?:\s|^)#/);-1!==r&&(e=e.slice(0,r).trim()),s&&e&&i.push({directive:s,value:e})}}}let o=[],l=!1,n=!1,u={};var h=["allow","disallow","noindex","comment","robot-version","request-rate","visit-time","cache-delay","crawl-delay"];for(let e=0;e<i.length;e++){let r=i[e];var c=-1!==h.indexOf(r.directive)&&!n;if("user-agent"!==r.directive&&!c||(n=!0,c=c?"*":r.value,-1!==!o.indexOf(c)&&o.push(c),u[c])||(u[c]=new d(c)),"allow"===r.directive){let t=this.normalizePath(r.value);o.forEach(e=>u[e].addRule("allow",t)),l=!0}else if("disallow"===r.directive){let t=this.normalizePath(r.value);o.forEach(e=>u[e].addRule("disallow",t)),l=!0}else if("noindex"===r.directive){let t=this.normalizePath(r.value);o.forEach(e=>u[e].addRule("noindex",t)),l=!0}else if("cache-delay"===r.directive){let t=+r.value;if(isNaN(t)){console.error(`Invalid Cache-delay value: ${r.value} is not a number.`);continue}if(t<=0){console.error(`Cache-delay must be a positive number. The provided value is ${t}.`);continue}o.forEach(e=>{u[e].cacheDelay||(u[e].cacheDelay=t)}),l=!0}else if("crawl-delay"===r.directive){let t=+r.value;if(isNaN(t)){console.error(`Invalid Crawl-Delay value: ${r.value} is not a number.`);continue}if(t<=0){console.error(`Crawl-Delay must be a positive number. The provided value is ${t}.`);continue}o.forEach(e=>{u[e].crawlDelay||(u[e].crawlDelay=t)}),l=!0}else if("comment"===r.directive)o.forEach(e=>u[e].comment.push(r.value)),l=!0;else if("robot-version"===r.directive){if(!/^(\d+)\.(\d+)\.(\d+)(?:-([a-zA-Z]+(?:\.\d+)?))?$/u.test(r.value)){console.error(`Invalid Robot-Version value: ${r.value} does not match semantic versioning format.`);continue}o.forEach(e=>u[e].robotVersion=r.value),l=!0}else"request-rate"===r.directive?(o.forEach(e=>u[e].requestRates.push(r.value)),l=!0):"visit-time"===r.directive?(o.forEach(e=>u[e].visitTime=r.value),l=!0):"sitemap"===r.directive?this.sitemaps.push(r.value):"clean-param"===r.directive?this.cleanParam.push(r.value):"host"===r.directive&&(this.host=r.value);c=i[e+1];c&&l&&"user-agent"===c.directive&&(l=!1,o=[])}this.groups=Object.keys(u).map(e=>u[e])}isAllowed(e,t){if(void 0===e)throw new Error("The 'url' parameter is required.");if(void 0===t)throw new Error("The 'userAgent' parameter is required.");var r,i,t=this.getApplicableRules(t),a=this.normalizeUrlPath(e),s=[];for(r of t)r.match(a)&&s.push(r);if(0===s.length)return!0;let o=s[0];for(i of s){var l=this.getRuleSpecificity(i.path);this.getRuleSpecificity(o.path)<l&&(o=i)}return"allow"===o.type}isDisallowed(e,t){return!this.isAllowed(e,t)}getSitemaps(){return this.sitemaps}getCleanParams(){return this.cleanParam}getHost(){return this.host=void 0}getGroup(t){if(t)for(let e=0;e<this.groups.length;e++){var r=this.groups[e];if(r.userAgent.toLowerCase()===t.toLowerCase())return r}}getRuleSpecificity(e){let t=e.length;return-1!==e.indexOf("*")?t-=.5:"$"===e.slice(-1)&&(t+=.5),t}getApplicableGroups(t){var e=this.groups.filter(e=>e.getName().toLowerCase()===t.toLowerCase());return 0<e.length?e:this.groups.filter(e=>"*"===e.getName())}getApplicableRules(e){return this.getApplicableGroups(e).reduce((e,t)=>e.concat(t.getRules()),[])}normalizeUrlPath(t){try{return this.normalizePath(new URL(t).pathname)}catch(e){return this.normalizePath(t)}}normalizePath(t){let r;try{r=decodeURIComponent(t)}catch(e){r=t}t=r.replace(/\/+/gu,"/");return"/"===t[0]?t:"/"+t}}function e(e){return new t(e)}"undefined"!=typeof exports&&(exports.robotstxt=e),"undefined"!=typeof window&&(window.robotstxt=e,"function"==typeof define)&&define.amd&&define(()=>({robotstxt:e}))})();
//# sourceMappingURL=robotstxt.min.js.map
