/*! @playfulsparkle/robotstxt-js v1.0.4 | Copyright (c) 2025-present, Zsolt Oroszl√°ny <hello@playfulsparkle.com> | BSD-3-Clause */
(()=>{class r{constructor(e,t){this.type=e,this.path=t}}class n{constructor(e){this.userAgent=e,this.crawlDelay=void 0,this.rules=[]}getName(){return this.userAgent}getCrawlDelay(){return this.crawlDelay}getRules(){return this.rules}allow(e){this.addRule("allow",e)}disallow(e){this.addRule("disallow",e)}addRule(e,t){if(void 0===e)throw new Error("The 'type' parameter is required.");if(void 0===t)throw new Error("The 'path' parameter is required.");this.rules.push(new r(e,t))}}class t{constructor(e){this.parsedData={groups:[],sitemaps:[]},this.pathMatchesCache={},this.parse(e)}parse(e){if(void 0===e)throw new Error("The 'content' parameter is required.");var t,a=[];for(t of e.split(/\r\n|\r|\n/)){var r=t.trim();if(r&&!r.startsWith("#")){var i=r.indexOf(":");if(-1!==i){var s=r.slice(0,i).trim().toLowerCase();let e=r.slice(i+1).trim();r=e.search(/(?:\s|^)#/);-1!==r&&(e=e.slice(0,r).trim()),s&&e&&a.push({directive:s,value:e})}}}a[0]&&"user-agent"!==a[0].directive&&a.unshift({directive:"user-agent",value:"*"});let l=[],o=!1,h={};for(let e=0;e<a.length;e++){let r=a[e];var u=a[e+1];if("user-agent"===r.directive)l.push(r.value),h[r.value]||(h[r.value]=new n(r.value));else if("allow"===r.directive)l.forEach(e=>h[e].allow(r.value)),o=!0;else if("disallow"===r.directive)l.forEach(e=>h[e].disallow(r.value)),o=!0;else if("crawl-delay"===r.directive){let t=+r.value;if(!isNaN(t)){if(t<=0)throw new Error(`Crawl-Delay must be a positive number. The provided value is ${t}.`);l.forEach(e=>{h[e].crawlDelay||(h[e].crawlDelay=t)})}o=!0}else"sitemap"===r.directive&&this.parsedData.sitemaps.push(r.value);u&&o&&"user-agent"===u.directive&&(o=!1,l=[])}this.parsedData.groups=Object.keys(h).map(e=>h[e])}isAllowed(e,t){if(void 0===e)throw new Error("The 'url' parameter is required.");if(void 0===t)throw new Error("The 'userAgent' parameter is required.");var r,a,t=this.getApplicableRules(t),i=this.normalizeUrlPath(e),s=[];for(r of t)this.pathMatches(r.path,i)&&s.push(r);if(0===s.length)return!0;let l=s[0];for(a of s){var o=this.getRuleSpecificity(a.path);this.getRuleSpecificity(l.path)<o&&(l=a)}return"allow"===l.type}isDisallowed(e,t){return!this.isAllowed(e,t)}getSitemaps(){return this.parsedData.sitemaps}getGroup(t){if(t)for(let e=0;e<this.parsedData.groups.length;e++){var r=this.parsedData.groups[e];if(r.userAgent.toLowerCase()===t.toLowerCase())return r}}getRuleSpecificity(e){let t=e.length;return-1!==e.indexOf("*")?t-=.5:"$"===e.slice(-1)&&(t+=.5),t}getApplicableGroups(t){var e=this.parsedData.groups.filter(e=>e.getName().toLowerCase()===t.toLowerCase());return 0<e.length?e:this.parsedData.groups.filter(e=>"*"===e.getName())}getApplicableRules(e){return this.getApplicableGroups(e).reduce((e,t)=>e.concat(t.getRules()),[])}normalizeUrlPath(t){try{return this.normalizePath(new URL(t).pathname)}catch(e){return this.normalizePath(t)}}pathMatches(e,t){var r=e+"__"+t;return this.pathMatchesCache.hasOwnProperty(r)?this.pathMatchesCache[r]:(e=this.normalizePath(e).replace(/[.^+?(){}[\]|\\]/gu,"\\$&").replace(/\*/gu,".*"),e=new RegExp("^"+e,"u").test(t),this.pathMatchesCache[r]=e)}normalizePath(e){e=decodeURIComponent(e).replace(/\/+/gu,"/");return"/"===e[0]?e:"/"+e}}function e(e){return new t(e)}"undefined"!=typeof exports&&(exports.robotstxt=e),"undefined"!=typeof window&&(window.robotstxt=e,"function"==typeof define)&&define.amd&&define(()=>({robotstxt:e}))})();
//# sourceMappingURL=robotstxt.min.js.map
